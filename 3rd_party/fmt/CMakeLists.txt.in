cmake_minimum_required(VERSION 3.5)
cmake_policy(SET CMP0135 NEW)

project(fmt-download NONE)

# Supress unused build variables warnings (such as CMAKE_C_FLAGS when an underlying project is a pure C++ project)
cmake_policy(SET CMP0077 NEW)

include(ExternalProject)

ExternalProject_Add(fmt
  URL               https://github.com/fmtlib/fmt/archive/refs/tags/8.0.1.tar.gz
  SOURCE_DIR        "${CMAKE_CURRENT_BINARY_DIR}/fmt-src"
  BINARY_DIR        "${CMAKE_CURRENT_BINARY_DIR}/fmt-build"
  INSTALL_DIR       "${CMAKE_CURRENT_BINARY_DIR}/fmt-install"
  CMAKE_GENERATOR   "${CMAKE_GENERATOR}"
  CMAKE_ARGS        "-DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}/fmt-install;"
                    "-DCMAKE_PREFIX_PATH=${CMAKE_PREFIX_PATH};"
                    "-DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE};"
                    "-DCMAKE_CXX_STANDARD=${CMAKE_CXX_STANDARD};"
                    "-DCMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER};"
                    "-DCMAKE_CXX_FLAGS=${CMAKE_CXX_FLAGS};"
                    "-DCMAKE_C_STANDARD=${CMAKE_C_STANDARD};"
                    "-DCMAKE_C_COMPILER=${CMAKE_C_COMPILER};"
                    "-DCMAKE_C_FLAGS=${CMAKE_C_FLAGS};"
                    "-DCMAKE_MODULE_LINKER_FLAGS=${CMAKE_MODULE_LINKER_FLAGS};"
                    "-DFMT_MASTER_PROJECT=OFF;"
                    "-DFMT_INSTALL=ON;"
  TEST_COMMAND      ""
)
